<ng-container *ngIf="data$ | async as data; else loadingState">
  <ng-container *ngFor="let subjectData of data">
    <ng-container *ngFor="let domain of subjectData">
      <div class="my-5 pb-5 card card-body shadow">
        <div echarts [options]="domain" class="demo-chart"></div>
        <div>
          Answer dates are between:
          <strong>
            {{ domain.extra.firstAnswerDate | date: mediumDate }} -
            {{ domain.extra.lastAnswerDate | date: mediumDate }}
          </strong>
        </div>
        <div>
          Number of answers: <strong>{{ domain.extra.numberOfAnswers }}</strong>
        </div>
        <div>
          Total Progress: <strong>{{ domain.extra.totalProgress }}</strong>
        </div>
        <div>
          Average Progress Per Answer:
          <strong>{{ domain.extra.averageProgressAtTheEnd }}</strong>
        </div>
      </div>
    </ng-container>
  </ng-container>
</ng-container>

<ng-template #loadingState>
  <div class="d-flex justify-content-center mt-5">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
      <span class="visually-hidden">Your data is processing...</span>
    </div>
  </div>
</ng-template>
